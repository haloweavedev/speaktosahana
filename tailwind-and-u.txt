# Tailwind + Shadcn UI in the Monorepo

This monorepo runs Tailwind v4 with shared Shadcn UI primitives in `packages/ui`. Each Next.js app pulls in the same PostCSS/Tailwind toolchain, a consistent set of CSS variables, and a preset that extends sidebar colors + animations. The goal of this doc is to show exactly how everything is wired so you can replicate it in another workspace.

---

## Toolchain Snapshot
- Tailwind `^4.1.5` + `@tailwindcss/postcss` (see each app’s `postcss.config.js`).
- Next.js 15 with the App Router; styles are imported once in `app/layout.tsx`.
- Shared UI package `@repo/ui` contains Shadcn components, a Tailwind preset, and a small globals file for sidebar variables.
- Optional shared PostCSS export + theme tokens live in `@repo/tailwind-config`.

---

## Base CSS in Each App
Every app imports Tailwind (v4 syntax) and animation utilities, then maps CSS custom properties into Tailwind theme tokens via `@theme inline`. Example from `apps/airodental/app/globals.css`:

```css
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-lato);
  --font-heading: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}
```

Key points:
- `@custom-variant dark (&:is(.dark *));` enables the `dark:` variant anywhere a `.dark` class is in the ancestor chain.
- `@theme inline` lifts your CSS variables into Tailwind tokens (background, foreground, primary, sidebar colors, radii, fonts).
- Root variables define the actual palette; admin/laine add extra utilities (line clamps, dashboard button helpers).
- Base layer applies shared defaults:
  ```css
  @layer base {
    * { @apply border-border outline-ring/50; }
    body { @apply bg-background text-foreground; }
  }
  ```
- Animations: `tw-animate-css` is imported alongside Tailwind so you can use classes like `animate-fade-in`.

Laine-specific additions in `apps/laine/app/globals.css`:
- Dedicated dashboard colors (`--color-dashboard-primary`) and scoped `.web-booking-container` overrides for the booking flow.
- Extra utilities/components (e.g., `.line-clamp-2`, `.btn-dashboard-primary`, `.web-booking-container` scope).

---

## Tailwind Config per App
All configs live next to each app to keep Turbopack happy.

**Shared preset usage (Admin/Laine)**  
These apps consume the `@repo/ui` preset so that Shadcn components share animations and sidebar colors:
```js
// apps/admin/tailwind.config.js
import uiConfig from "@repo/ui/tailwind.config"

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
    "../../packages/ui/src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: '#C33763',
      },
    },
  },
  presets: [uiConfig],
  plugins: [],
};
```

**Marketing site (AiroDental)**  
This app stays minimal but can opt into the preset later:
```js
// apps/airodental/tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./components/**/*.{js,ts,jsx,tsx,mdx}",
    "./app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: { primary: '#C33763' },
    },
  },
  presets: [],
  plugins: [],
};
```

**What the preset provides (`packages/ui/tailwind.config.js`):**
```js
/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: ["./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      colors: {
        sidebar: {
          DEFAULT: "hsl(var(--sidebar-background))",
          foreground: "hsl(var(--sidebar-foreground))",
          primary: "hsl(var(--sidebar-primary))",
          "primary-foreground": "hsl(var(--sidebar-primary-foreground))",
          accent: "hsl(var(--sidebar-accent))",
          "accent-foreground": "hsl(var(--sidebar-accent-foreground))",
          border: "hsl(var(--sidebar-border))",
          ring: "hsl(var(--sidebar-ring))",
        },
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
}
```
- Sidebar colors are driven by CSS variables defined in each app’s `globals.css` (`--sidebar-*`).
- `tailwindcss-animate` injects reusable keyframes used by the Shadcn components (e.g., dialogs, toasts).

---

## PostCSS Wiring
Tailwind v4 ships the official PostCSS plugin. Each app enables it:

```js
// apps/laine/postcss.config.js (admin is identical)
export default {
  plugins: ["@tailwindcss/postcss"]
};
```

AiroDental re-exports the same setup from the shared package:
```js
// apps/airodental/postcss.config.js
import { postcssConfig } from "@repo/tailwind-config/postcss";
export default postcssConfig;
```

The shared package also exposes theme tokens if you want to import them directly:
```css
/* packages/tailwind-config/shared-styles.css */
@import "tailwindcss";

@theme {
  --color-blue-1000: #2a8af6;
  --color-purple-1000: #a853ba;
  --color-red-1000: #e92a67;
}
```

---

## Shadcn Components in `@repo/ui`
- All exports are re-exported from `packages/ui/src/index.ts`. Import them directly from the package:
  ```ts
  import {
    Button,
    Card,
    Dialog,
    Input,
    Tooltip,
    Toaster,
  } from "@repo/ui";
  ```
- Components follow the standard Shadcn patterns (CVA variants, `cn` helper, Radix under the hood). Example `Button` base:
  ```ts
  const buttonVariants = cva(
    "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
    {
      variants: {
        variant: {
          default: "bg-[var(--color-primary,#6366f1)] text-white hover:bg-[var(--color-primary,#6366f1)]/90",
          destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
          outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
          secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
          ghost: "hover:bg-accent hover:text-accent-foreground",
          link: "text-[var(--color-primary,#6366f1)] underline-offset-4 hover:underline",
        },
        size: {
          default: "h-10 px-4 py-2",
          sm: "h-9 rounded-md px-3",
          lg: "h-11 rounded-md px-8",
          icon: "h-10 w-10",
        },
      },
      defaultVariants: { variant: "default", size: "default" },
    }
  );
  ```
  The `default` variant respects `--color-primary`, so your app-level CSS variables immediately theme the UI kit.
- Utilities: `cn` merges classes with `clsx` + `tailwind-merge`.
- Toasts: `Toaster`/`toast` come from Radix + Sonner and are placed in `app/layout.tsx`.

Component scaffolding is tracked by `packages/ui/components.json`:
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "src/styles/globals.css",
    "baseColor": "slate",
    "cssVariables": true
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils"
  }
}
```

`packages/ui/src/styles/globals.css` supplies sidebar tokens for the preset:
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%
  }
  .dark {
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%
  }
}

@layer base {
  * { @apply border-border; }
  body { @apply bg-background text-foreground; }
}
```
Import this file inside your consuming app if you need the sidebar palette defaults; otherwise the app-level `globals.css` can redefine `--sidebar-*` directly.

---

## Layout Imports (Next.js)
Each app brings Tailwind + UI styles into the runtime via `app/layout.tsx`. Example from `apps/admin/app/layout.tsx`:
```tsx
import "./globals.css";
import type { Metadata } from "next";
import { Toaster } from "@repo/ui";

export const metadata: Metadata = { title: "Admin Dashboard", description: "AiroDental Admin Dashboard" };

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body className="antialiased">
        {children}
        <Toaster />
      </body>
    </html>
  );
}
```
The marketing site uses `Toaster as UIToaster` and wraps content in `AutumnProvider`; the pattern is the same: import `./globals.css` first, render `<Toaster />` once at the root.

---

## Adding a New App with the Same Styling
1) **Dependencies**  
   - Add `tailwindcss`, `@tailwindcss/postcss`, `tw-animate-css`, and `@repo/ui` (workspace protocol) to the app’s `package.json`.  
   - Optional: add `@repo/tailwind-config` to reuse the PostCSS export.

2) **PostCSS config**  
   ```js
   // postcss.config.js
   export default { plugins: ["@tailwindcss/postcss"] };
   // or import { postcssConfig } from "@repo/tailwind-config/postcss"; export default postcssConfig;
   ```

3) **Tailwind config**  
   - Copy the admin/laine config, point `content` to your app paths, and include `../../packages/ui/src/**/*` so utility classes used in the UI package are scanned.
   - Add `presets: [uiConfig]` to inherit sidebar colors + animations.

4) **Globals**  
   - Start from `apps/airodental/app/globals.css` so all expected CSS variables exist.
   - Keep `@custom-variant dark` and the `@theme inline` block so Tailwind picks up your tokens.
   - Adjust brand colors by changing `--primary`, `--color-dashboard-primary`, etc.; Shadcn components will pick them up automatically.

5) **Layout import**  
   - Import `./globals.css` at the top of `app/layout.tsx`.
   - Render `<Toaster />` from `@repo/ui` once per app to enable toasts.

6) **Consume components**  
   ```tsx
   import { Button, Card, Input, Tooltip } from "@repo/ui";
   // ...
   <Button variant="default">Save</Button>
   ```
   Because `content` includes `packages/ui/src/**/*`, Tailwind will not purge those classes.

7) **Run it**  
   - `pnpm dev --filter <app>` or `pnpm --filter <app> lint`/`check-types` to verify the styling toolchain.

---

## Notes & Gotchas
- Keep the `.dark` class on `<html>` or a top-level wrapper to activate dark variants (the preset sets `darkMode: ["class"]`).
- If you override sidebar variables, ensure both light and `.dark` values exist to avoid undefined HSL tokens.
- When adding new Shadcn components to `packages/ui`, ensure they export from `src/index.ts` and that any new colors rely on existing CSS variables or extend them in `globals.css`.
- If you enable the preset on the marketing app, remove the empty `presets: []` array and add `uiConfig`; also include `../../packages/ui/src/**/*` in `content`.
- The shared `@repo/tailwind-config/shared-styles.css` is optional; import it if you want the baseline palette available in pure CSS.

That’s the full loop: Tailwind v4 + shared PostCSS, app-scoped globals that define CSS variables, a UI preset with sidebar colors/animations, and Shadcn components exported from `@repo/ui`.
